{
    "openapi": "3.0.2",
    "info": {
        "title": "Montimage AI Platform (MAIP)",
        "description": "The APIs provided by MAIP",
        "termsOfService": "https://github.com/Montimage/maip",
        "contact": {
            "email": "developer@montimage.com"
        },
        "license": {
            "name": "Montimage",
            "url": "https://www.montimage.com"
        },
        "version": "0.0.1"
    },
    "externalDocs": {
        "description": "Find out more about Montimage open-source projects",
        "url": "https://github.com/montimage"
    },
    "servers": [
        {
            "url": "/api/"
        }
    ],
    "tags": [
        {
            "name": "mmt",
            "description": "Everything relates to manipulating the MMT Tool",
            "externalDocs": {
                "description": "Find out more",
                "url": "https://github.com/montimage/mmt-probe"
            }
        },
        {
            "name": "reports",
            "description": "Access to reports which are the output of analysing a pcap file",
            "externalDocs": {
                "description": "More detail on the report format",
                "url": "http://github.com/montimage/mmt-probe"
            }
        },
        {
            "name": "pcaps",
            "description": "List/upload trace file for analysing"
        },
        {
            "name": "logs",
            "description": "Access to the log of MMT Tools"
        },
        {
            "name": "models",
            "description": "API relates to the model and the building model process"
        },
        {
            "name": "predictions",
            "description": "API relates to the prediction process"
        },
        {
            "name": "xai",
            "description": "API relates to XAI"
        }
    ],
    "paths": {
        "/mmt/": {
            "get": {
                "tags": [
                    "mmt"
                ],
                "summary": "Get the status of MMT Tool",
                "description": "Get the status of MMT Tool",
                "operationId": "getMMTStatus",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/mmtStatus"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/mmt/stop": {
            "get": {
                "tags": [
                    "mmt"
                ],
                "summary": "Stop analyzing",
                "description": "Stop the analyzing process if there is any",
                "operationId": "stopMMT",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/mmtStatus"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/mmt/offline": {
            "post": {
                "tags": [
                    "mmt"
                ],
                "summary": "Start analysing a pcap file",
                "description": "Analysing a pcap file",
                "operationId": "runMMTOffline",
                "requestBody": {
                    "description": "The name of the pcap file",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "fileName": {
                                        "type": "string",
                                        "example": "tcp_bbc-out-of-order.pcap"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/mmtStatus"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Cannot launch MMT Tool"
                    }
                }
            }
        },
        "/mmt/dataset": {
            "post": {
                "tags": [
                    "mmt"
                ],
                "summary": "Analyzing a dataset",
                "description": "Start analysing a dataset which includes a set of trace files",
                "operationId": "runMMTdataset",
                "requestBody": {
                    "description": "The name of the dataset",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "datasetName": {
                                        "type": "string",
                                        "example": "tcp-dataset"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/mmtStatus"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Cannot launch MMT Tool"
                    }
                }
            }
        },
        "/mmt/online": {
            "post": {
                "tags": [
                    "mmt"
                ],
                "summary": "Start monitor a network interface in real-time",
                "description": "Monitor a network interface in real-time",
                "operationId": "runMMTOnline",
                "requestBody": {
                    "description": "The name of the interface on the monitoring machine",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "netInf": {
                                        "type": "string",
                                        "example": "enp0s1"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/mmtStatus"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Cannot launch MMT Tool"
                    }
                }
            }
        },
        "/reports/": {
            "get": {
                "tags": [
                    "reports"
                ],
                "summary": "Get reports list",
                "description": "Get the list of all reports have been generated by the MMT Tool",
                "operationId": "getAllReport",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "reports": {
                                            "type": "array",
                                            "items": {
                                                "type": "string",
                                                "example": "report-3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/reports/{reportId}": {
            "get": {
                "tags": [
                    "reports"
                ],
                "summary": "Get list csv of a report",
                "description": "Get full list of csv files of a given report",
                "operationId": "getAReport",
                "parameters": [
                    {
                        "name": "reportId",
                        "in": "path",
                        "description": "ID of report to return",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "report-3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "csvFiles": {
                                            "type": "array",
                                            "items": {
                                                "type": "string",
                                                "example": "1673907516.082856_0__data.csv"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/reports/{reportId}/{fileName}/download": {
            "get": {
                "tags": [
                    "reports"
                ],
                "summary": "Download a raw report file",
                "description": "Download a raw report file",
                "operationId": "downloadReport",
                "parameters": [
                    {
                        "name": "reportId",
                        "in": "path",
                        "description": "ID of report to return",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "report-3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace"
                        }
                    },
                    {
                        "name": "fileName",
                        "in": "path",
                        "description": "Name of the csv file to return",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "1673907516.082856_0__data.csv"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "multipart/form-data": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "401":{
                        "description": "Log file does not exist"
                    }
                }
            }
        },
        "/reports/{reportId}/{fileName}": {
            "get": {
                "tags": [
                    "reports"
                ],
                "summary": "Get detail of a csv file of a report",
                "description": "Get detail of a csv file of a given report",
                "operationId": "getCSVReport",
                "parameters": [
                    {
                        "name": "reportId",
                        "in": "path",
                        "description": "ID of report to return",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "report-3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace"
                        }
                    },
                    {
                        "name": "fileName",
                        "in": "path",
                        "description": "Name of the csv file to return",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "1673907516.082856_0__data.csv"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "content": {
                                            "type": "string",
                                            "example": "1,2,3,43,,4,5,5,6,6"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/logs/": {
            "get": {
                "tags": [
                    "logs"
                ],
                "summary": "Get the list of all logs",
                "description": "Get the list of all logs have been generated by the MMT Tool",
                "operationId": "getAllLogs",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "logs": {
                                            "type": "array",
                                            "items": {
                                                "type": "string",
                                                "example": "3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace.log"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/logs/{fileName}/download": {
            "get": {
                "tags": [
                    "logs"
                ],
                "summary": "Download a log file",
                "description": "Download a log file",
                "operationId": "downloadLog",
                "parameters": [
                    {
                        "name": "fileName",
                        "in": "path",
                        "description": "Name of the log file to return",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace.log"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "multipart/form-data": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "401":{
                        "description": "Log file does not exist"
                    }
                }
            }
        },
        "/logs/{fileName}": {
            "get": {
                "tags": [
                    "logs"
                ],
                "summary": "Get detail of a log file",
                "description": "Get content of a log file",
                "operationId": "getLog",
                "parameters": [
                    {
                        "name": "fileName",
                        "in": "path",
                        "description": "Name of the log file to return",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace.log"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "content": {
                                            "type": "string",
                                            "example": "this is the log content"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/pcaps/": {
            "get": {
                "tags": [
                    "pcaps"
                ],
                "summary": "Get the list of all pcap files",
                "description": "Get the list of all pcap files which are available for analyzing",
                "operationId": "getPcapList",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "pcaps": {
                                            "type": "array",
                                            "items": {
                                                "type": "string",
                                                "example": "tcp_bbc-out-of-order.pcap"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "pcaps"
                ],
                "summary": "Upload a pcap file",
                "description": "Update a pcap file to analyse",
                "operationId": "uploadPcap",
                "requestBody": {
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "pcapFile": {
                                        "type": "string",
                                        "format": "binary"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "pcapFile": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Failed to create save pcap file"
                    }
                }
            }
        },
        "/pcaps/{datasetName}": {
            "get": {
                "tags": [
                    "pcaps"
                ],
                "summary": "Get the list of all pcap files of a given dataset",
                "description": "Get the list of all pcap files of a given dataset which can be analyze in dataset mode",
                "operationId": "getPcapDataset",
                "parameters": [
                    {
                        "name": "datasetName",
                        "in": "path",
                        "description": "Name of the dataset",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "ip-dataset01"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "pcaps": {
                                            "type": "array",
                                            "items": {
                                                "type": "string",
                                                "example": "ip_ping_local_ip_fragmentation.pcap"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "pcaps"
                ],
                "summary": "Upload a list of pcap files to a dataset",
                "description": "Update a list of pcap files to build a dataset",
                "operationId": "uploadPcapDataset",
                "parameters": [
                    {
                        "name": "datasetName",
                        "in": "path",
                        "description": "Name of the dataset",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "my_dataset"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "pcapFiles": {
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "format": "binary"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "pcapFileName": {
                                            "type": "string",
                                            "example": "my_dataset.pcap"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Failed to create dataset location"
                    }
                }
            }
        },
        "/build/": {
            "get": {
                "tags": [
                    "models"
                ],
                "summary": "The building model process status",
                "description": "Get the status of building model process",
                "operationId": "getBuildingStatus",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/buildingStatus"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "models"
                ],
                "summary": "Start building a model",
                "description": "Request building a model",
                "operationId": "requestBuildModel",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/buildConfig"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/buildingStatus"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Failed to process building a model"
                    }
                }
            }
        },
        "/retrain/": {
            "get": {
                "tags": [
                    "models"
                ],
                "summary": "The retraining model process status",
                "description": "Get the status of retraining model process",
                "operationId": "getRetrainStatus",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/retrainStatus"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "models"
                ],
                "summary": "Retraining a model using different training datasets",
                "description": "Request retraining a model",
                "operationId": "requestRetrainModel",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/retrainConfig"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/retrainStatus"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Failed to process retraining a model"
                    }
                }
            }
        },    
        "/models/": {
            "get": {
                "tags": [
                    "models"
                ],
                "summary": "Get the list of all models",
                "description": "Get the list of all models can be used",
                "operationId": "getAllModels",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "models": {
                                            "type": "array",
                                            "items": {
                                                "type": "string",
                                                "example": "3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace.h5"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/models/{modelName}": {
            "get": {
                "tags": [
                    "models"
                ],
                "summary": "Get the stats of the building model process",
                "description": "Get the statistic of the building model process",
                "operationId": "getModelStats",
                "parameters": [
                    {
                        "name": "modelName",
                        "in": "path",
                        "description": "Name of the model",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace.h5"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "content": {
                                            "type": "string",
                                            "example": ""
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/models/{modelName}/download": {
            "get": {
                "tags": [
                    "models"
                ],
                "summary": "Download a model file",
                "description": "Download a model file",
                "operationId": "downloadModel",
                "parameters": [
                    {
                        "name": "modelName",
                        "in": "path",
                        "description": "Name of the model file to return",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace.h5"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "multipart/form-data": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "401":{
                        "description": "Model file does not exist"
                    }
                }
            }
        },
        "/models/{modelName}/datasets/training": {
            "get": {
                "tags": [
                    "models"
                ],
                "summary": "Download training dataset",
                "description": "Download training dataset in .csv format",
                "operationId": "downloadModelTrainingDataset",
                "parameters": [
                    {
                        "name": "modelName",
                        "in": "path",
                        "description": "Name of the model file to return",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace.h5"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "multipart/form-data": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "401":{
                        "description": "Training dataset file does not exist"
                    }
                }
            }
        },
        "/models/{modelName}/datasets/testing": {
            "get": {
                "tags": [
                    "models"
                ],
                "summary": "Download Testing dataset",
                "description": "Download Testing dataset",
                "operationId": "downloadModelTestingDataset",
                "parameters": [
                    {
                        "name": "modelName",
                        "in": "path",
                        "description": "Name of the model file to return",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace.h5"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "multipart/form-data": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "401":{
                        "description": "Testing dataset file does not exist"
                    }
                }
            }
        },
        "/models/{modelName}/confusion-matrix": {
            "get": {
                "tags": [
                    "models"
                ],
                "summary": "Get the confusion matrix of the building model process",
                "description": "Get the confusion matrix of the building model process",
                "operationId": "getModelConfMatrix",
                "parameters": [
                    {
                        "name": "modelName",
                        "in": "path",
                        "description": "Name of the model",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace.h5"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "content": {
                                            "type": "string",
                                            "example": ""
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/models/{modelName}/build-config": {
            "get": {
                "tags": [
                    "models"
                ],
                "summary": "Get the information relate to the building of the model",
                "description": "Get the configuration of the model building process",
                "operationId": "getModelBuildConfig",
                "parameters": [
                    {
                        "name": "modelName",
                        "in": "path",
                        "description": "Name of the model",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace.h5"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/buildConfig"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/predict/": {
            "get": {
                "tags": [
                    "predictions"
                ],
                "summary": "The prediction process status",
                "description": "Get the status of the latest prediction process",
                "operationId": "getPredictionStatus",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/predictingStatus"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "predictions"
                ],
                "summary": "Start predicting",
                "description": "Request predicting for an input traffic",
                "operationId": "requestPredicting",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/predictConfig"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/predictingStatus"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Failed to process a prediction"
                    }
                }
            }
        },
        "/predict/stop": {
            "get": {
                "tags": [
                    "predictions"
                ],
                "summary": "Stop the current prediction process",
                "description": "Stop the current online prediction process",
                "operationId": "stopOnlinePrediction",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/predictingStatus"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/predictions/": {
            "get": {
                "tags": [
                    "predictions"
                ],
                "summary": "Get the list of all predictions",
                "description": "Get the list of all predictions",
                "operationId": "getAllPredictions",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "predictions": {
                                            "type": "array",
                                            "items": {
                                                "type": "string",
                                                "example": "3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/predictions/{predictionId}": {
            "get": {
                "tags": [
                    "predictions"
                ],
                "summary": "Get the statistics of prediction",
                "description": "Get the statistics of prediction where there are total number of flows, number of attack flows, and number of normal flows",
                "operationId": "getPredictionStats",
                "parameters": [
                    {
                        "name": "predictionId",
                        "in": "path",
                        "description": "Name of the model file to return",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace.h5"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "prediction": {
                                            "type": "array",
                                            "items": {
                                                "type": "number",
                                                "example": 1243
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/predictions/{predictionId}/download": {
            "get": {
                "tags": [
                    "predictions"
                ],
                "summary": "Download a prediction file",
                "description": "Download a prediction file",
                "operationId": "downloadPrediction",
                "parameters": [
                    {
                        "name": "predictionId",
                        "in": "path",
                        "description": "Name of the predictionId to return",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "multipart/form-data": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "401":{
                        "description": "Prediction does not exist"
                    }
                }
            }
        },
        "/predictions/{predictionId}/attack": {
            "get": {
                "tags": [
                    "predictions"
                ],
                "summary": "Download full report on attack traffics",
                "description": "Download full report of attack traffics",
                "operationId": "downloadPredictionAttack",
                "parameters": [
                    {
                        "name": "predictionId",
                        "in": "path",
                        "description": "Name of the predictionId to return",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "multipart/form-data": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "401":{
                        "description": "Prediction does not exist"
                    }
                }
            }
        },
        "/predictions/{predictionId}/normal": {
            "get": {
                "tags": [
                    "predictions"
                ],
                "summary": "Download full report of normal traffic",
                "description": "Download full report of normal traffic",
                "operationId": "downloadPredictionNormal",
                "parameters": [
                    {
                        "name": "predictionId",
                        "in": "path",
                        "description": "Name of the predictionId to return",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "3c6e4cb4-9b74-40c8-8f4a-132c9d5e4ace"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "multipart/form-data": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "401":{
                        "description": "Prediction does not exist"
                    }
                }
            }
        },
        "/xai/": {
            "get": {
                "tags": [
                    "xai"
                ],
                "summary": "The XAI process status",
                "description": "Get the status of the latest XAI process",
                "operationId": "getXAIStatus",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/xaiStatus"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/xai/shap": {
            "post": {
                "tags": [
                    "xai"
                ],
                "summary": "Start explaining the model using SHAP",
                "description": "Request producing explanations of a model using SHAP",
                "operationId": "requestSHAP",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/shapConfig"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/xaiStatus"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Failed to produce explanations using SHAP"
                    }
                }
            }
        },
        "/xai/shap/explanations/{modelName}": {
            "get": {
                "tags": [
                    "xai"
                ],
                "summary": "Get explanations of feature importance using SHAP",
                "description": "Request producing explanations of feature importance using SHAP",
                "operationId": "explanationsSHAP",
                "parameters": [
                    {
                        "name": "modelName",
                        "in": "path",
                        "description": "Name of the model",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "e0a0588e-96c4-4fdf-9237-a8e94a6f5ffe.h5"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "explanations": {
                                            "type": "string",
                                            "example": ""
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/xai/lime": {
            "post": {
                "tags": [
                    "xai"
                ],
                "summary": "Start explaining the model using LIME",
                "description": "Request producing explanations of a model using LIME",
                "operationId": "requestLIME",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/limeConfig"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/xaiStatus"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Failed to produce explanations using LIME"
                    }
                }
            }
        },
        "/xai/explanations/{modelName}": {
            "get": {
                "tags": [
                    "xai"
                ],
                "summary": "Get the explanations produced by XAI methods",
                "description": "Get the explanations produced by XAI methods",
                "operationId": "getXAIExplanations",
                "parameters": [
                    {
                        "name": "modelName",
                        "in": "path",
                        "description": "Name of the model",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "e0a0588e-96c4-4fdf-9237-a8e94a6f5ffe.h5"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "explanations": {
                                            "type": "array",
                                            "items": {
                                                "type": "string",
                                                "example": "shap.png"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/attacks/": {
            "get": {
                "tags": [
                    "attacks"
                ],
                "summary": "The attack injection process status",
                "description": "Get the status of the process of performing adversarial attacks",
                "operationId": "getAttacks",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/attacksStatus"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/attacks/ctgan": {
            "post": {
                "tags": [
                    "attacks"
                ],
                "summary": "Perform Conditional Generative Adversarial Network (CTGAN) to generate synthetic tabular samples",
                "description": "Perform CTGAN for synthetic tabular data generation",
                "operationId": "performCTGAN",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ctganConfig"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/attacksStatus"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/attacks/ctgan/{modelName}/download": {
            "get": {
                "tags": [
                    "attacks"
                ],
                "summary": "Download synthetic tabular dataset produced by CTGAN",
                "description": "Download synthetic tabular dataset produced by CTGAN",
                "operationId": "getCTGANDataset",
                "parameters": [
                    {
                        "name": "modelName",
                        "in": "path",
                        "description": "Name of the model file",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "e0a0588e-96c4-4fdf-9237-a8e94a6f5ffe.h5"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "multipart/form-data": {
                                "schema": {
                                    "type": "string",
                                    "example": "ctgan_samples.csv"
                                }
                            }
                        }
                    },
                    "401":{
                        "description": "CTGAN dataset does not exist"
                    }
                }
            }
        },
        "/attacks/poisoning/ctgan": {
            "post": {
                "tags": [
                    "attacks"
                ],
                "summary": "Perform poisoning attacks with CTGAN",
                "description": "Perform poisoning attacks with CTGAN",
                "operationId": "performPoisoningCTGAN",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/poisoningAttacksConfig"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/attacksStatus"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/attacks/poisoning/random-swapping-labels": {
            "post": {
                "tags": [
                    "attacks"
                ],
                "summary": "Perform poisoning RSL attack by randomly choosing two samples of the training dataset and swapping their labels",
                "description": "Perform random swapping labels attack",
                "operationId": "performRandomSwappingLabels",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/poisoningAttacksConfig"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/attacksStatus"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/attacks/poisoning/target-label-flipping": {
            "post": {
                "tags": [
                    "attacks"
                ],
                "summary": "Perform poisoning TLF attack by flipping labels of some samples from one class to the target class",
                "description": "Perform target label flipping attack",
                "operationId": "performTargetLabelFlipping",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/targetLabelFlippingConfig"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/attacksStatus"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/attacks/poisoning/{typeAttack}/{modelName}/download": {
            "get": {
                "tags": [
                    "attacks"
                ],
                "summary": "Download the poisoned training dataset",
                "description": "Download the poisoned training dataset",
                "operationId": "getPoisonedDataset",
                "parameters": [
                    {
                        "name": "typeAttack",
                        "in": "path",
                        "description": "Type of poisoning attacks (ctgan, rsl, tlf)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "ctgan"
                        }
                    },
                    {
                        "name": "modelName",
                        "in": "path",
                        "description": "Name of the model file",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "e0a0588e-96c4-4fdf-9237-a8e94a6f5ffe.h5"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "multipart/form-data": {
                                "schema": {
                                    "type": "string",
                                    "example": "rsl_poisoned_dataset.csv"
                                }
                            }
                        }
                    },
                    "401":{
                        "description": "The poisoned training dataset does not exist"
                    }
                }
            }
        },
        "/metrics/{modelName}/accuracy": {
            "get": {
                "tags": [
                    "metrics"
                ],
                "summary": "Accuracy metric is the proportion of the total number of correct predictions that were correct",
                "description": "Get the accuracy metric",
                "operationId": "getAccuracy",
                "parameters": [
                    {
                        "name": "modelName",
                        "in": "path",
                        "description": "Name of the model",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "e0a0588e-96c4-4fdf-9237-a8e94a6f5ffe.h5"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "content": {
                                            "type": "string",
                                            "example": ""
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/metrics/{modelName}/currentness": {
            "get": {
                "tags": [
                    "metrics"
                ],
                "summary": "Currentness metric is the ratio between time taken to create explanations using XAI methods for the test dataset to the time taken to predict the same test set",
                "description": "Get the currentness metric",
                "operationId": "getCurrentness",
                "parameters": [
                    {
                        "name": "modelName",
                        "in": "path",
                        "description": "Name of the model",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "e0a0588e-96c4-4fdf-9237-a8e94a6f5ffe.h5"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "content": {
                                            "type": "string",
                                            "example": ""
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/metrics/{typePoisoningAttack}/{modelName}/impact": {
            "get": {
                "tags": [
                    "metrics"
                ],
                "summary": "Impact metric of data poisoing attacks (or accuracy decrease) measures the decrease of a performance score between benign model and poisoned model",
                "description": "Get the impact metric",
                "operationId": "getImpact",
                "parameters": [
                    {
                        "name": "typePoisoningAttack",
                        "in": "path",
                        "description": "Type of poisoning attacks (ctgan, rsl, tlf)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "rsl"
                        }
                    },
                    {
                        "name": "modelName",
                        "in": "path",
                        "description": "Name of the model",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "e0a0588e-96c4-4fdf-9237-a8e94a6f5ffe.h5"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "content": {
                                            "type": "string",
                                            "example": ""
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "mmtStatus": {
                "type": "object",
                "properties": {
                    "isRunning": {
                        "type": "boolean",
                        "example": true
                    },
                    "sessionId": {
                        "type": "string",
                        "example": "fadfafewfwefwe"
                    },
                    "isOnlineMode": {
                        "type": "boolean",
                        "example": false
                    },
                    "startedAt": {
                        "type": "string",
                        "example": "123243534534"
                    }
                }
            },
            "buildingStatus": {
                "type": "object",
                "properties": {
                    "isRunning": {
                        "type": "boolean",
                        "example": true
                    },
                    "lastBuildId": {
                        "type": "string",
                        "example": "fadfafewfwefwe"
                    },
                    "config": {
                        "$ref": "#/components/schemas/buildConfig"
                    },
                    "lastBuildAt": {
                        "type": "string",
                        "example": "123243534534"
                    }
                }
            },
            "predictingStatus": {
                "type": "object",
                "properties": {
                    "isRunning": {
                        "type": "boolean",
                        "example": true
                    },
                    "lastPredictedId": {
                        "type": "string",
                        "example": "fadfafewfwefwe"
                    },
                    "config": {
                        "$ref": "#/components/schemas/predictConfig"
                    },
                    "lastPredictedAt": {
                        "type": "string",
                        "example": "123243534534"
                    }
                }
            },
            "buildConfig": {
                "type":"object",
                "properties":{
                    "buildConfig":{
                        "type": "object",
                        "properties": {
                            "datasets": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "datasetId": {
                                            "type":"string",
                                            "example": "my-dataset-01"
                                        },
                                        "isAttack": {
                                            "type":"boolean",
                                            "example": true
                                        }
                                    }
                                }
                            },
                            "total_samples": {
                                "type": "number",
                                "example": 10000
                            },
                            "training_ratio": {
                                "type": "number",
                                "example": 0.7
                            },
                            "training_parameters": {
                                "type": "object",
                                "properties": {
                                    "nb_epoch_cnn":{
                                        "type":"number",
                                        "example": 2
                                    },
                                    "nb_epoch_sae":{
                                        "type":"number",
                                        "example": 5
                                    },
                                    "batch_size_cnn":{
                                        "type":"number",
                                        "example": 32
                                    },
                                    "batch_size_sae":{
                                        "type":"number",
                                        "example": 16
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "retrainStatus": {
                "type": "object",
                "properties": {
                    "isRunning": {
                        "type": "boolean",
                        "example": true
                    },
                    "config": {
                        "$ref": "#/components/schemas/retrainConfig"
                    },
                    "lastRetrainAt": {
                        "type": "string",
                        "example": "123243534534"
                    }
                }
            },
            "retrainConfig": {
                "type": "object",
                "properties":{
                    "retrainConfig":{
                        "type": "object",
                        "properties": {
                            "modelId": {
                                "type": "string",
                                "example": "e0a0588e-96c4-4fdf-9237-a8e94a6f5ffe.h5"
                            },
                            "trainingDataset": {
                                "type": "string",
                                "example": "/tmp/Botnet_Train.csv"
                            },
                            "testingDataset": {
                                "type": "string",
                                "example": "/tmp/Botnet_Test.csv"
                            },
                            "training_parameters": {
                                "type": "object",
                                "properties": {
                                    "nb_epoch_cnn":{
                                        "type":"number",
                                        "example": 2
                                    },
                                    "nb_epoch_sae":{
                                        "type":"number",
                                        "example": 5
                                    },
                                    "batch_size_cnn":{
                                        "type":"number",
                                        "example": 32
                                    },
                                    "batch_size_sae":{
                                        "type":"number",
                                        "example": 16
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "predictConfig": {
                "type": "object",
                "properties":{
                    "predictConfig": {
                        "type": "object",
                        "properties": {
                            "modelId": {
                                "type": "string",
                                "example": "6d9aebed-aa34-47c5-be80-b41280c32163.h5"
                            },
                            "inputTraffic": {
                                "type": "object",
                                "properties": {
                                    "type":{
                                        "type":"string",
                                        "example": "report"
                                    },
                                    "value": {
                                        "type":"object",
                                        "properties":{
                                            "reportId":{
                                                "type":"string",
                                                "example": "report-honeypot.pcap-342727c9-e253-4124-85fd-974c2ad60bae"
                                            },
                                            "reportFileName":{
                                                "type":"string",
                                                "example": "1675893004.993760_0_honeypot.pcap.csv"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "xaiStatus": {
                "type": "object",
                "properties": {
                    "isRunning": {
                        "type": "boolean",
                        "example": true
                    },
                    "config": {
                        "$ref": "#/components/schemas/xaiConfig"
                    },
                    "lastRunAt": {
                        "type": "string",
                        "example": "123243534534"
                    }
                }
            },
            "shapConfig": {
                "type":"object",
                "properties":{
                    "shapConfig": {
                        "type": "object",
                        "properties": {
                            "modelId": {
                                "type": "string",
                                "example": "e0a0588e-96c4-4fdf-9237-a8e94a6f5ffe.h5"
                            },
                            "numberSamples": {
                                "type": "number",
                                "example": "50"
                            },
                            "maxDisplay": {
                                "type": "number",
                                "example": "10"
                            }
                        }
                    }
                }
            },
            "limeConfig": {
                "type":"object",
                "properties":{
                    "limeConfig": {
                        "type": "object",
                        "properties": {
                            "modelId": {
                                "type": "string",
                                "example": "e0a0588e-96c4-4fdf-9237-a8e94a6f5ffe.h5"
                            },
                            "sampleId": {
                                "type": "number",
                                "example": "100"
                            },
                            "numberFeature": {
                                "type": "number",
                                "example": "10"
                            }
                        }
                    }
                }
            },
            "ctganConfig": {
                "type":"object",
                "properties":{
                    "ctganConfig": {
                        "type": "object",
                        "properties": {
                            "modelId": {
                                "type": "string",
                                "example": "e0a0588e-96c4-4fdf-9237-a8e94a6f5ffe.h5"
                            },
                            "numberEpochs": {
                                "type": "number",
                                "example": "5"
                            },
                            "numberSyntheticSamples": {
                                "type": "number",
                                "example": "10000"
                            }
                        }
                    }
                }
            },
            "poisoningAttacksConfig": {
                "type":"object",
                "properties":{
                    "poisoningAttacksConfig": {
                        "type": "object",
                        "properties": {
                            "modelId": {
                                "type": "string",
                                "example": "e0a0588e-96c4-4fdf-9237-a8e94a6f5ffe.h5"
                            },
                            "poisoningRate": {
                                "type": "number",
                                "example": "50"
                            }
                        }
                    }
                }
            }, 
            "targetLabelFlippingConfig": {
                "type":"object",
                "properties":{
                    "targetLabelFlippingConfig": {
                        "$ref": "#/components/schemas/poisoningAttacksConfig"
                    },
                    "targetClass": {
                        "type": "number",
                        "example": "1"
                    }
                }
            }, 
            "attacksStatus": {
                "type": "object",
                "properties": {
                    "isRunning": {
                        "type": "boolean",
                        "example": true
                    },
                    "config": {
                        "$ref": "#/components/schemas/attacksConfig"
                    },
                    "lastRunAt": {
                        "type": "string",
                        "example": "123243534534"
                    }
                }
            }
        }
    }
}