# ==============================================================================
# NDR Application - Docker Deployment Configuration
# ==============================================================================
# Ready-to-use configuration for Docker deployment with NATS integration

# ------------------------------------------------------------------------------
# SERVER CONFIGURATION
# ------------------------------------------------------------------------------
PROTOCOL=HTTP
SERVER_HOST=0.0.0.0
SERVER_PORT=31057
MODE=SERVER

# Docker environment flags
DOCKER_ENV=true
USE_SUDO=false
PYTHON_CMD=python3

# ------------------------------------------------------------------------------
# FILE UPLOAD SECURITY CONFIGURATION
# ------------------------------------------------------------------------------
MAX_PCAP_SIZE=10485760

# ------------------------------------------------------------------------------
# QUEUE & REDIS CONFIGURATION (REQUIRED)
# ------------------------------------------------------------------------------
REDIS_URL=redis://redis:6379
USE_QUEUE_BY_DEFAULT=true

# ------------------------------------------------------------------------------
# AI ASSISTANT CONFIGURATION (Optional)
# ------------------------------------------------------------------------------
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini
USER_TOKEN_LIMIT=30000

# Ollama (not used if OPENAI_API_KEY is empty)
OLLAMA_URL=http://localhost:11434
OLLAMA_MODEL=llama3.1

# ------------------------------------------------------------------------------
# CLIENT CONFIGURATION
# ------------------------------------------------------------------------------
# API URL that the React client uses to connect to the backend
# This is the URL users will access in their browser
#
# OPTIONS:
# - Same machine access: http://localhost:31057
# - Network access: http://YOUR_SERVER_IP:31057
# - Domain access: https://your-domain.com
#
# Default: localhost (change if accessing from other machines)
REACT_APP_API_URL=http://localhost:31057

# ------------------------------------------------------------------------------
# CORS CONFIGURATION
# ------------------------------------------------------------------------------
CORS_ALLOWED_ORIGINS=

# ------------------------------------------------------------------------------
# AUTHENTICATION (DISABLED)
# ------------------------------------------------------------------------------
# No authentication - all users can access all features
REACT_APP_CLERK_PUBLISHABLE_KEY=
REACT_APP_ADMIN_EMAILS=
REACT_APP_ADMIN_USER_IDS=
REACT_APP_ADMIN_ORG_ID=

# ------------------------------------------------------------------------------
# NATS CONFIGURATION (ENABLED)
# ------------------------------------------------------------------------------
# NATS integration for publishing security alerts to external components
#
# NETWORK SETUP:
# If NATS container name is 'nats' and shares network with NDR:
#   NATS_URL=nats://nats:4222
#
# If NATS is in separate Docker network, use one of these:
#   - Join NATS network in docker-compose.yml (recommended)
#   - Use host IP: NATS_URL=nats://172.17.0.1:4222
NATS_URL=nats://nats:4222

# NATS credentials (leave empty if no authentication required)
NATS_USER_INGESTOR=
NATS_PASS_INGESTOR=

# Not used by NDR server
NATS_USER_VIEWER=
NATS_PASS_VIEWER=

# NATS subject/topic for publishing alerts
NATS_SUBJECT=

# ------------------------------------------------------------------------------
# WORKER CONCURRENCY CONFIGURATION
# ------------------------------------------------------------------------------
# Adjust based on your server's CPU cores
# Default: 4-core system settings
FEATURE_WORKERS=3
TRAINING_WORKERS=2
PREDICTION_WORKERS=2
RULEBASED_WORKERS=2
XAI_WORKERS=1
ATTACK_WORKERS=1
RETRAIN_WORKERS=1

# For 8-core system (uncomment if you have 8+ cores):
#FEATURE_WORKERS=6
#TRAINING_WORKERS=3
#PREDICTION_WORKERS=4
#RULEBASED_WORKERS=2
#XAI_WORKERS=2
#ATTACK_WORKERS=2
#RETRAIN_WORKERS=2

# ------------------------------------------------------------------------------
# LOGGING & PERFORMANCE CONFIGURATION
# ------------------------------------------------------------------------------
# Production settings for optimal performance
NODE_ENV=production
VERBOSE_LOGS=false
NODE_OPTIONS=--max-old-space-size=4096